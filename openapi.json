{"openapi":"3.1.0","info":{"title":"Caja Backend","description":"Caja Live Event Engagement Platform Backend API","version":"0.1.0"},"paths":{"/api/v1/health/":{"get":{"tags":["health"],"summary":"Health Check","description":"Health check endpoint.\n\nReturns service health status and checks database connectivity.","operationId":"health_check_api_v1_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}},"503":{"description":"Service Unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/health/ready":{"get":{"tags":["health"],"summary":"Readiness Check","description":"Readiness check endpoint.\n\nReturns whether the service is ready to accept requests.","operationId":"readiness_check_api_v1_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/health/live":{"get":{"tags":["health"],"summary":"Liveness Check","description":"Liveness check endpoint.\n\nReturns whether the service is alive and running.","operationId":"liveness_check_api_v1_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/sessions/":{"post":{"tags":["sessions"],"summary":"Create Session","description":"Create a new session.\n\nCreates a new live event session with generated QR and admin codes.\nThe session starts in DRAFT status.","operationId":"create_session_api_v1_sessions__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionResponse"}}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["sessions"],"summary":"List Sessions","description":"List all sessions with pagination.\n\nReturns a paginated list of all sessions, ordered by creation date (newest first).","operationId":"list_sessions_api_v1_sessions__get","parameters":[{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionList"}}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/{session_id}":{"get":{"tags":["sessions"],"summary":"Get Session","description":"Get detailed session information.\n\nReturns complete session details including activities and participants.","operationId":"get_session_api_v1_sessions__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionDetail"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["sessions"],"summary":"Update Session","description":"Update an existing session.\n\nUpdates session details. Status transitions are tracked with timestamps.","operationId":"update_session_api_v1_sessions__session_id__put","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["sessions"],"summary":"Delete Session","description":"Delete a session.\n\nPermanently deletes a session and all associated data (activities, participants, responses).","operationId":"delete_session_api_v1_sessions__session_id__delete","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/code/{code}":{"get":{"tags":["sessions"],"summary":"Get Session By Code","description":"Get session by QR code or admin code.\n\nAllows participants to join via QR code or admins to access via admin code.","operationId":"get_session_by_code_api_v1_sessions_code__code__get","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}},{"name":"code_type","in":"query","required":false,"schema":{"type":"string","default":"qr","title":"Code Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ActivityResponse":{"properties":{"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"session_id":{"type":"integer","title":"Session Id"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"activity_type":{"$ref":"#/components/schemas/ActivityType"},"configuration":{"additionalProperties":true,"type":"object","title":"Configuration"},"is_active":{"type":"boolean","title":"Is Active"},"order_index":{"type":"integer","title":"Order Index"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"response_count":{"type":"integer","title":"Response Count","default":0}},"type":"object","required":["id","created_at","updated_at","session_id","title","description","activity_type","configuration","is_active","order_index","started_at","completed_at"],"title":"ActivityResponse","description":"Activity response model."},"ActivityType":{"type":"string","enum":["poll","word_cloud","qa","planning_poker"],"title":"ActivityType","description":"Activity type enumeration."},"ErrorResponse":{"properties":{"detail":{"type":"string","title":"Detail"},"error_type":{"type":"string","title":"Error Type","default":"ValidationError"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["detail"],"title":"ErrorResponse","description":"Error response model."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","default":"healthy"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"version":{"type":"string","title":"Version","default":"0.1.0"}},"type":"object","title":"HealthResponse","description":"Health check response model."},"ParticipantResponse":{"properties":{"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"session_id":{"type":"integer","title":"Session Id"},"display_name":{"type":"string","title":"Display Name"},"role":{"$ref":"#/components/schemas/ParticipantRole"},"is_active":{"type":"boolean","title":"Is Active"},"joined_at":{"type":"string","format":"date-time","title":"Joined At"},"last_seen_at":{"type":"string","format":"date-time","title":"Last Seen At"}},"type":"object","required":["id","created_at","updated_at","session_id","display_name","role","is_active","joined_at","last_seen_at"],"title":"ParticipantResponse","description":"Participant response model."},"ParticipantRole":{"type":"string","enum":["admin","viewer","participant"],"title":"ParticipantRole","description":"Participant role enumeration."},"SessionCreate":{"properties":{"title":{"type":"string","maxLength":255,"minLength":1,"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"max_participants":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Max Participants","default":100}},"type":"object","required":["title"],"title":"SessionCreate","description":"Session creation request model."},"SessionDetail":{"properties":{"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"status":{"$ref":"#/components/schemas/SessionStatus"},"qr_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qr Code"},"admin_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Code"},"max_participants":{"type":"integer","title":"Max Participants"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"participant_count":{"type":"integer","title":"Participant Count","default":0},"activity_count":{"type":"integer","title":"Activity Count","default":0},"activities":{"items":{"$ref":"#/components/schemas/ActivityResponse"},"type":"array","title":"Activities","default":[]},"participants":{"items":{"$ref":"#/components/schemas/ParticipantResponse"},"type":"array","title":"Participants","default":[]}},"type":"object","required":["id","created_at","updated_at","title","description","status","qr_code","admin_code","max_participants","started_at","completed_at"],"title":"SessionDetail","description":"Detailed session response with activities and participants."},"SessionList":{"properties":{"sessions":{"items":{"$ref":"#/components/schemas/SessionResponse"},"type":"array","title":"Sessions"},"total":{"type":"integer","title":"Total"},"offset":{"type":"integer","title":"Offset"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["sessions","total","offset","limit"],"title":"SessionList","description":"Session list response model."},"SessionResponse":{"properties":{"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"status":{"$ref":"#/components/schemas/SessionStatus"},"qr_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qr Code"},"admin_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Code"},"max_participants":{"type":"integer","title":"Max Participants"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"participant_count":{"type":"integer","title":"Participant Count","default":0},"activity_count":{"type":"integer","title":"Activity Count","default":0}},"type":"object","required":["id","created_at","updated_at","title","description","status","qr_code","admin_code","max_participants","started_at","completed_at"],"title":"SessionResponse","description":"Session response model."},"SessionStatus":{"type":"string","enum":["draft","active","completed"],"title":"SessionStatus","description":"Session status enumeration."},"SessionUpdate":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"max_participants":{"anyOf":[{"type":"integer","maximum":1000.0,"minimum":1.0},{"type":"null"}],"title":"Max Participants"},"status":{"anyOf":[{"$ref":"#/components/schemas/SessionStatus"},{"type":"null"}]}},"type":"object","title":"SessionUpdate","description":"Session update request model."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
